import{u as V,r as t,e as S,o as p,c as N,l as C,j as f,a as e,t as I,v as _,x as w,z as j,F as P,_ as F,n as M,p as A,d as B,g as z,s as R,h as D,w as O,i as U,b as Z,A as H}from"./app-rPuQw5Ku.js";import{L as T}from"./LoadingComponent-_43vqG-w.js";const J={class:"text-center text-light"},q=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-envelope-at-fill",viewBox:"0 0 16 16"},[e("path",{d:"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z"}),e("path",{d:"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z"})],-1),K=["textContent"],X=e("hr",null,null,-1),W=e("h2",null,"認証コード",-1),G={class:"form-text text-danger text-start"},Q={class:"text-end mt-5"},Y={__name:"RegisterEmailComponent",props:{InputFirstName:String,InputLastName:String,InputNickName:String,InputEmail:String,InputPassword:String,Token:Number},setup(h){const b=V(),v=h,l=t(),r=t(!1),u=t(!1);S(()=>{document.title="メール確認",document.getElementById("InputToken").addEventListener("input",()=>{r.value=!1}),document.addEventListener("keypress",n=>{n.key==="Enter"&&i()})});function i(){u.value=!0,fetch("register/create",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({Token:v.Token,InputToken:l.value,first_name:v.InputFirstName,last_name:v.InputLastName,name:v.InputNickName,email:v.InputEmail,password:v.InputPassword})}).then(n=>n.json()).then(n=>{n.check?b.push({name:"home"}):(l.value="",r.value=!0,u.value=!1)}).catch(n=>{console.log(n),u.value=!1})}return(n,d)=>(p(),N(P,null,[u.value?(p(),C(T,{key:0})):f("",!0),e("div",J,[q,e("h5",{class:"my-5 text-start",textContent:I(h.InputEmail+"にメール送信しました。30分以内にメール記載の6桁の認証コードを入力してください。")},null,8,K),X,W,_(e("input",{type:"number",id:"InputToken",class:"form-control border-success border-3","onUpdate:modelValue":d[0]||(d[0]=o=>l.value=o),placeholder:"認証コードを入力してください"},null,512),[[w,l.value]]),_(e("div",G,"認証コードが不正です",512),[[j,r.value]])]),e("div",Q,[e("button",{type:"button",class:"btn btn-primary",onClick:d[1]||(d[1]=o=>i())},"確認する")])],64))}},$=h=>(A("data-v-d1f84a10"),h=h(),B(),h),ee={key:1},te={class:"mb-3 d-flex"},ae={class:"w-100 me-3"},se=$(()=>e("label",{for:"FirstName",class:"form-label m-0"},"姓",-1)),oe={class:"w-100 ms-3"},ne=$(()=>e("label",{for:"LastName",class:"form-label m-0"},"名",-1)),le={class:"mb-3"},ie=$(()=>e("label",{for:"Name",class:"form-label m-0"},"ニックネーム",-1)),de=$(()=>e("div",{class:"form-text text-secondary m-0"},"半角英字、数字、ピリオドを使用できます。",-1)),ce={class:"mb-3"},re=$(()=>e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1)),ue={class:"form-text text-danger text-start"},ve={class:"mb-3"},me=$(()=>e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1)),pe=["textContent"],he={class:"text-center mt-3 mx-2"},_e={class:"row"},fe=$(()=>e("div",{class:"col text-start"},[e("a",{href:"login",class:"text-decoration-none"},"代わりにログイン")],-1)),be={class:"col text-end"},ge=["disabled"],xe={__name:"RegisterComponent",setup(h){const b=t(),v=t(Math.floor(Math.random()*888889)+111111),l=t(),r=t(),u=t(),i=t(),n=t(),d=t(!1),o=t(!0),g=t(!0),x=t(!1),y=t(!1);S(()=>{document.title="新規登録",k(),document.addEventListener("keypress",a=>{a.key==="Enter"&&!o.value&&c()})}),M(()=>{l.value&&r.value&&u.value&&i.value&&n.value?i.value.includes("@")&&(o.value=!1):o.value=!0});function k(){let a=document.getElementById("Password");d.value?(a.type="text",b.value="パスワードを非表示",d.value=!1):(a.type="password",b.value="パスワードを表示",d.value=!0)}function c(){x.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({subject:"テストメール",email:i.value,onetime_token:v.value})}).then(a=>a.json()).then(a=>{x.value=!1,a.emailCheck?g.value=!1:y.value=!0}).catch(a=>{console.log(a),x.value=!1})}return(a,s)=>(p(),N(P,null,[x.value?(p(),C(T,{key:0})):f("",!0),g.value?(p(),N("form",ee,[e("div",te,[e("div",ae,[se,_(e("input",{type:"text",id:"FirstName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":s[0]||(s[0]=m=>l.value=m)},null,512),[[w,l.value]])]),e("div",oe,[ne,_(e("input",{type:"text",id:"LastName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":s[1]||(s[1]=m=>r.value=m)},null,512),[[w,r.value]])])]),e("div",le,[ie,_(e("input",{type:"text",id:"Name",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":s[2]||(s[2]=m=>u.value=m)},null,512),[[w,u.value]]),de]),e("div",ce,[re,_(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":s[3]||(s[3]=m=>i.value=m)},null,512),[[w,i.value]]),_(e("div",ue,"既に存在しているメールアドレスです",512),[[j,y.value]])]),e("div",ve,[me,_(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":s[4]||(s[4]=m=>n.value=m)},null,512),[[w,n.value]]),e("button",{type:"button",id:"clickItem",class:"form-text text-secondary btn p-1 border-0",onClick:s[5]||(s[5]=m=>k()),textContent:I(b.value)},null,8,pe)]),e("div",he,[e("div",_e,[fe,e("div",be,[e("button",{type:"button",class:"btn btn-primary px-5",onClick:s[6]||(s[6]=m=>c()),disabled:o.value},"次へ",8,ge)])])])])):f("",!0),g.value?f("",!0):(p(),C(Y,{key:2,InputFirstName:l.value,InputLastName:r.value,InputNickName:u.value,InputEmail:i.value,InputPassword:n.value,Token:v.value},null,8,["InputFirstName","InputLastName","InputNickName","InputEmail","InputPassword","Token"]))],64))}},ye=F(xe,[["__scopeId","data-v-d1f84a10"]]),E=h=>(A("data-v-a8b115c8"),h=h(),B(),h),we={class:"form-floating text-dark mb-3"},ke=E(()=>e("label",{for:"Email"},"メールアドレス",-1)),Ce={class:"form-floating text-dark mb-3"},Ie=E(()=>e("label",{for:"Password"},"パスワード",-1)),Ne={class:"form-text text-danger text-start"},$e=["textContent"],Le={class:"mt-3"},Ee={class:"text-center"},Se=["disabled"],Pe=E(()=>e("div",{class:"d-flex align-items-center justify-content-center mt-1"},[e("a",{href:"/tps-site/auth/register",class:"btn text-secondary text-truncate border-0 p-0"},"新規登録")],-1)),Te={class:"card card-body text-bg-dark border"},Ve=["textContent"],je=Z('<div class="text-secondary" data-v-a8b115c8>この決定への異議申し立てはお問い合わせから可能です。</div><hr data-v-a8b115c8><div class="fw-bold mb-3" data-v-a8b115c8>この影響について</div><div class="d-flex align-items-center justify-content-start mb-3" data-v-a8b115c8><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16" data-v-a8b115c8><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z" data-v-a8b115c8></path><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z" data-v-a8b115c8></path></svg><div class="ms-3" data-v-a8b115c8>あなたのアカウントは利用規約に違反しています。</div></div><div class="d-flex align-items-center justify-content-start mb-3" data-v-a8b115c8><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-slash-circle" viewBox="0 0 16 16" data-v-a8b115c8><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" data-v-a8b115c8></path><path d="M11.354 4.646a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 .708.708l6-6a.5.5 0 0 0 0-.708z" data-v-a8b115c8></path></svg><div class="ms-3" data-v-a8b115c8>あなたのアカウントを認証できない場合、アカウントは永久に停止されます。</div></div>',5),Fe={class:"d-flex align-items-center justify-content-start mb-3"},Me=E(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-calendar-event",viewBox:"0 0 16 16"},[e("path",{d:"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"}),e("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"})],-1)),Ae={class:"ms-3"},Be=E(()=>e("hr",null,null,-1)),ze={__name:"LoginComponent",setup(h){const b=V(),v=t(),l=t(),r=t(),u=t(!1),i=t(!1),n=t(!1),d=t(!0),o=t(null),g=t(!1);S(()=>{document.title="ログイン",window.addEventListener("resize",y),y(),k(),document.addEventListener("keypress",x)}),M(()=>{l.value&&r.value?l.value.includes("@")&&(d.value=!1):d.value=!0});const x=a=>{a.key==="Enter"&&!d.value&&c()},y=()=>{window.screen.width<=768?g.value=!0:g.value=!1};function k(){let a=document.getElementById("Password");u.value?(a.type="text",v.value="パスワードを非表示",u.value=!1):(a.type="password",v.value="パスワードを表示",u.value=!0)}function c(){i.value=!0,fetch("/tps-site/auth/login",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({email:l.value,password:r.value})}).then(a=>a.json()).then(a=>{if(document.querySelector('meta[name="csrf-token"]').content=a.csrf,a.check&&a.responseData)b.go({name:"home"});else if(a.check&&!a.responseData){o.value=new Array,o.value=a.user_ban_list;const s=new Date(o.value.start_date),m=new Date(o.value.last_date);o.value.start_date=s.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),o.value.last_date=m.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}else n.value=!0;i.value=!1}).catch(a=>{console.log(a),i.value=!1,n.value=!0})}return(a,s)=>{const m=z("router-link");return p(),N(P,null,[i.value?(p(),C(T,{key:0})):f("",!0),e("div",we,[_(e("input",{type:"email",class:"form-control border-0",id:"Email",placeholder:"name@example.com","onUpdate:modelValue":s[0]||(s[0]=L=>l.value=L)},null,512),[[w,l.value]]),ke]),e("div",Ce,[_(e("input",{type:"password",class:"form-control border-0",id:"Password",placeholder:"Password","onUpdate:modelValue":s[1]||(s[1]=L=>r.value=L)},null,512),[[w,r.value]]),Ie,_(e("div",Ne,"メールアドレスまたはパスワードが不明です",512),[[j,n.value]]),e("button",{type:"button",id:"clickItem",class:"form-text text-secondary btn p-1 border-0",onClick:s[2]||(s[2]=L=>k()),textContent:I(v.value)},null,8,$e)]),e("div",Le,[e("div",Ee,[e("button",{type:"button",class:"btn btn-primary rounded-pill w-100",onClick:s[3]||(s[3]=L=>c()),disabled:d.value},"ログイン",8,Se),Pe])]),o.value?(p(),N("div",{key:1,class:R(["ElmCenter px-3",{"w-100":g.value}])},[e("div",Te,[e("div",{class:"fs-5 fw-bold",textContent:I("あなたのアカウントは"+o.value.start_date+"に利用停止されました")},null,8,Ve),je,e("div",Fe,[Me,e("div",Ae,"あなたのアカウントは、"+I(o.value.last_date)+"まで停止されます。",1)]),Be,D(m,{to:{name:"contact"},class:"btn btn-primary rounded-pill py-1"},{default:O(()=>[U("問い合わせ")]),_:1})])],2)):f("",!0)],64)}}},Re=F(ze,[["__scopeId","data-v-a8b115c8"]]),De={key:1,class:"bg-dark d-flex align-items-center justify-content-center",style:{width:"100%",height:"100vh"}},Oe={class:"card-header border-0"},Ue={class:"d-flex align-items-center justify-content-center"},Ze={class:"text-center"},He=["textContent"],Je={class:"card-body overflow-auto"},qe={__name:"Auth",setup(h){const b=V(),v=t(!1),l=t(""),r=t(),u=t(),i=t(),n=t(!0),d=t([]),o=t();S(()=>{g(),x(),k(),y(),window.addEventListener("resize",y)});const g=()=>{fetch("/tps-site/auth/login/check").then(c=>c.json()).then(c=>{c.ResponseData?b.push({name:"home"}):(n.value=!1,v.value=!0)}).catch(c=>{console.log(c)})},x=()=>{fetch("/tps-site/get/env").then(c=>c.json()).then(c=>{l.value=c.ResponseData}).catch(c=>{console.log(c)})},y=()=>{window.screen.width<=768?(r.value="100%",u.value="100vh",i.value=!1):(r.value="35%",u.value="60%",i.value=!0)},k=()=>{location.pathname==="/tps-site/auth/register"?(d.value[0]=!0,o.value="アカウントの作成"):location.pathname==="/tps-site/auth/login"&&(d.value[1]=!0,o.value="ログイン")};return(c,a)=>{const s=z("router-link");return p(),N(P,null,[n.value?(p(),C(T,{key:0})):f("",!0),v.value?(p(),N("div",De,[e("div",{class:R(["card text-bg-dark colorBackGradient",{"border-light":i.value}]),style:H({width:r.value,height:u.value})},[e("div",Oe,[e("div",Ue,[e("div",Ze,[D(s,{to:"/",class:"fw-bold fs-1 text-light text-decoration-none"},{default:O(()=>[U(I(l.value),1)]),_:1}),e("h4",{textContent:I(l.value+o.value)},null,8,He)])])]),e("div",Je,[d.value[0]?(p(),C(ye,{key:0})):f("",!0),d.value[1]?(p(),C(Re,{key:1})):f("",!0)])],6)])):f("",!0)],64)}}},We=F(qe,[["__scopeId","data-v-c05cd659"]]);export{We as default};
