import{U as V}from"./UserHelpers-OMSCx4IH.js";import{_ as B,b as p,c as C,i as O,m as P,r as t,o as $,g as w,h as y,d as e,t as I,p as b,v as x,q as L,F as T,s as F,a as U,e as j,w as A,u as E,l as R,n as M,f as Z}from"./app-2tJGtkd4.js";const q={},z={class:"position-fixed d-flex align-items-center justify-content-center z-3",style:{top:"0",left:"0",width:"100%",height:"100vh"}},D=O('<div class="bg-light opacity-25" style="width:100%;height:100vh;"></div><div class="position-absolute"><div class="Loader" data-text="LOADING"><span class="Loader__Circle"></span><span class="Loader__Circle"></span><span class="Loader__Circle"></span><span class="Loader__Circle"></span></div></div>',2),H=[D];function J(N,_){return p(),C("div",z,H)}const S=B(q,[["render",J]]),K={class:"text-center text-light"},X=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-envelope-at-fill",viewBox:"0 0 16 16"},[e("path",{d:"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z"}),e("path",{d:"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z"})],-1),G=["textContent"],W=e("hr",null,null,-1),Q=e("h2",null,"認証コード",-1),Y={class:"form-text text-danger text-start"},ee={class:"text-end mt-5"},te={__name:"RegisterEmailComponent",props:{InputFirstName:String,InputLastName:String,InputNickName:String,InputEmail:String,InputPassword:String,Token:Number},setup(N){const _=P(),n=N,a=t(n.InputFirstName),l=t(n.InputLastName),i=t(n.InputNickName),o=t(n.InputEmail),d=t(n.InputPassword),h=t(n.Token),m=t(),g=t(!1),s=t(!1);$(()=>{document.getElementById("InputToken").addEventListener("input",()=>{g.value=!1})});function c(){s.value=!0,fetch("register/create",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({Token:h.value,InputToken:m.value,first_name:a.value,last_name:l.value,name:i.value,email:o.value,password:d.value})}).then(r=>r.json()).then(r=>{r.check?_.push({name:"home"}):(m.value="",g.value=!0,s.value=!1)}).catch(r=>{console.log(r),s.value=!1})}return(r,k)=>(p(),C(T,null,[s.value?(p(),w(S,{key:0})):y("",!0),e("div",K,[X,e("h5",{class:"my-5 text-start",textContent:I(o.value+"にメール送信しました。30分以内にメール記載の6桁の認証コードを入力してください。")},null,8,G),W,Q,b(e("input",{type:"number",id:"InputToken",class:"form-control border-success border-3","onUpdate:modelValue":k[0]||(k[0]=v=>m.value=v),placeholder:"認証コードを入力してください"},null,512),[[x,m.value]]),b(e("div",Y,"認証コードが間違っています",512),[[L,g.value]])]),e("div",ee,[e("button",{type:"button",class:"btn btn-primary",onClick:k[1]||(k[1]=v=>c())},"確認する")])],64))}},se={key:1},oe={class:"mb-3 d-flex"},ne={class:"w-100 me-3"},ae=e("label",{for:"FirstName",class:"form-label m-0"},"姓",-1),le={class:"w-100 ms-3"},ie=e("label",{for:"LastName",class:"form-label m-0"},"名",-1),re={class:"mb-3"},ue=e("label",{for:"Name",class:"form-label m-0"},"ニックネーム",-1),de=e("div",{class:"form-text text-secondary m-0"},"半角英字、数字、ピリオドを使用できます。",-1),ce={class:"mb-3"},me=e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1),ve={class:"form-text text-danger text-start"},pe={class:"mb-3"},_e=e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1),he=["textContent"],fe={class:"text-center mt-3 mx-2"},be={class:"row"},ge=e("div",{class:"col text-start"},[e("a",{href:"login",class:"text-decoration-none"},"代わりにログイン")],-1),xe={class:"col text-end"},ye=["disabled"],ke={__name:"RegisterComponent",setup(N){const _=t(),n=t(Math.floor(Math.random()*888889)+111111),a=t(),l=t(),i=t(),o=t(),d=t(),h=t(!1),m=t(!0),g=t(!0),s=t(!1),c=t(!1);$(()=>{r()}),F(()=>{a.value&&l.value&&i.value&&o.value&&d.value?o.value.includes("@")&&(m.value=!1):m.value=!0});function r(){let v=document.getElementById("Password");h.value?(v.type="text",_.value="パスワードを非表示",h.value=!1):(v.type="password",_.value="パスワードを表示",h.value=!0)}function k(){s.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({subject:"テストメール",email:o.value,onetime_token:n.value})}).then(v=>v.json()).then(v=>{s.value=!1,v.emailCheck?g.value=!1:c.value=!0}).catch(v=>{console.log(v),s.value=!1})}return(v,u)=>(p(),C(T,null,[s.value?(p(),w(S,{key:0})):y("",!0),g.value?(p(),C("form",se,[e("div",oe,[e("div",ne,[ae,b(e("input",{type:"text",id:"FirstName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[0]||(u[0]=f=>a.value=f)},null,512),[[x,a.value]])]),e("div",le,[ie,b(e("input",{type:"text",id:"LastName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[1]||(u[1]=f=>l.value=f)},null,512),[[x,l.value]])])]),e("div",re,[ue,b(e("input",{type:"text",id:"Name",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[2]||(u[2]=f=>i.value=f)},null,512),[[x,i.value]]),de]),e("div",ce,[me,b(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[3]||(u[3]=f=>o.value=f)},null,512),[[x,o.value]]),b(e("div",ve,"既に存在しているメールアドレスです",512),[[L,c.value]])]),e("div",pe,[_e,b(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[4]||(u[4]=f=>d.value=f)},null,512),[[x,d.value]]),e("button",{type:"button",class:"form-text text-secondary btn btn-dark p-1 border-0",onClick:u[5]||(u[5]=f=>r()),textContent:I(_.value)},null,8,he)]),e("div",fe,[e("div",be,[ge,e("div",xe,[e("button",{type:"button",class:"btn btn-primary px-5",onClick:u[6]||(u[6]=f=>k()),disabled:m.value},"次へ",8,ye)])])])])):y("",!0),g.value?y("",!0):(p(),w(te,{key:2,InputFirstName:a.value,InputLastName:l.value,InputNickName:i.value,InputEmail:o.value,InputPassword:d.value,Token:n.value},null,8,["InputFirstName","InputLastName","InputNickName","InputEmail","InputPassword","Token"]))],64))}},Ce={class:"mb-3"},we=e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1),Ne={class:"mb-3"},Ie=e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1),$e={class:"form-text text-danger text-start"},Le=["textContent"],Te={class:"mt-3"},Se={class:"text-center"},Ee=["disabled"],Pe=e("button",{type:"button",class:"btn text-primary border-0 p-0"},"メールアドレスまたはパスワードを忘れた方",-1),Fe={__name:"LoginComponent",setup(N){const _=P(),n=t(),a=t(),l=t(),i=t(!1),o=t(!1),d=t(!1),h=t(!0);$(()=>{m()}),F(()=>{a.value&&l.value?a.value.includes("@")&&(h.value=!1):h.value=!0});function m(){let s=document.getElementById("Password");i.value?(s.type="text",n.value="パスワードを非表示",i.value=!1):(s.type="password",n.value="パスワードを表示",i.value=!0)}function g(){o.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:l.value})}).then(s=>s.json()).then(s=>{s.check?_.push({name:"home"}):d.value=!0,o.value=!1}).catch(s=>{console.log(s),o.value=!1,d.value=!0})}return(s,c)=>(p(),C(T,null,[o.value?(p(),w(S,{key:0})):y("",!0),e("div",Ce,[we,b(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":c[0]||(c[0]=r=>a.value=r)},null,512),[[x,a.value]])]),e("div",Ne,[Ie,b(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":c[1]||(c[1]=r=>l.value=r)},null,512),[[x,l.value]]),b(e("div",$e,"メールアドレスまたはパスワードが不明です",512),[[L,d.value]]),e("button",{type:"button",class:"form-text text-secondary btn btn-dark p-1 border-0",onClick:c[2]||(c[2]=r=>m()),textContent:I(n.value)},null,8,Le)]),e("div",Te,[e("div",Se,[e("button",{type:"button",class:"btn btn-primary rounded-pill w-100",onClick:c[3]||(c[3]=r=>g()),disabled:h.value},"ログイン",8,Ee),Pe])])],64))}},Ve={class:"bg-dark d-flex align-items-center justify-content-center",style:{width:"100%",height:"100vh"}},Be={class:"card-header border-0"},Oe={class:"d-flex align-items-center justify-content-center"},Ue={class:"text-center"},je=["textContent"],Ae={class:"card-body overflow-auto"},Ze={__name:"Auth",setup(N){const{getAPP_NAME:_}=V(),n=t(),a=t(),l=t(),i=t([]),o=t();$(()=>{d(),h(),window.addEventListener("resize",d)});const d=()=>{window.screen.width<=768?(n.value="100%",a.value="100vh",l.value=!1):(n.value="35%",a.value="60%",l.value=!0)},h=()=>{location.pathname==="/tps-site/auth/register"?(i.value[0]=!0,o.value="アカウントの作成"):location.pathname==="/tps-site/auth/login"&&(i.value[1]=!0,o.value="ログイン")};return(m,g)=>{const s=U("router-link");return p(),C("div",Ve,[e("div",{class:R(["card text-bg-dark",{"border-light":l.value}]),style:M({width:n.value,height:a.value})},[e("div",Be,[e("div",Oe,[e("div",Ue,[j(s,{to:"/",class:"fw-bold fs-1 text-light text-decoration-none"},{default:A(()=>[Z(I(E(_)),1)]),_:1}),e("h4",{textContent:I(E(_)+o.value)},null,8,je)])])]),e("div",Ae,[i.value[0]?(p(),w(ke,{key:0})):y("",!0),i.value[1]?(p(),w(Fe,{key:1})):y("",!0)])],6)])}}};export{Ze as default};
