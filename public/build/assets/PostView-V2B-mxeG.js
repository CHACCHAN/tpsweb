import{L as C}from"./LoadingComponent-sCqGFqAI.js";import{T as D,_ as I}from"./FooterComponent-BboSP84j.js";import"./vue-quill.bubble-B1t1Vazk.js";import{r as s,e as M,o as u,c as v,l as N,j as h,h as P,a as g,t as w,F as x}from"./app-BBkFCyAd.js";const E={class:"container bg-light rounded-4"},F=["textContent"],b={class:"ql-snow"},j=["innerHTML"],q={__name:"PostView",setup(B){const p=s(!0),m=location.protocol+"//"+location.host+"/tps-site/images/components/IconImage.png",l=s(),c=s(),i=s(),a=s([]),_=s([]),r=s(),n=s();M(()=>{A(),f(),L()});const d=()=>{const t=decodeURI(location.pathname).split("/")[4];for(let e=0;e<a.value.length;e++)if(a.value[e].title===t&&a.value[e].public){document.title=a.value[e].title,r.value=a.value[e].content,n.value=a.value[e].updated_at;break}else if(a.value[e].title===t&&!a.value[e].public){document.title="非公開",r.value="このページは非公開設定になっています",n.value=!1;break}},A=()=>{fetch("/tps-site/get/env").then(t=>t.json()).then(t=>{l.value=t.ResponseData}).catch(t=>{console.log(t)})},f=()=>{fetch("/tps-site/auth/login/check").then(t=>t.json()).then(t=>{c.value=t.ResponseData,i.value=t.Adminstrator}).catch(t=>{console.log(t)})},L=async()=>{const t=k(),e=y();await Promise.all([t,e]),d(),p.value=!1},k=()=>new Promise((t,e)=>{fetch("/tps-site/get/postdata").then(o=>o.json()).then(o=>{a.value=o.responseData,t()}).catch(o=>{console.log(o),e(o)})}),y=()=>new Promise((t,e)=>{fetch("/tps-site/get/postcategory").then(o=>o.json()).then(o=>{_.value=o.responseData,t()}).catch(o=>{console.log(o),e(o)})});return(t,e)=>(u(),v(x,null,[p.value?(u(),N(C,{key:0})):h("",!0),P(D,{APP_NAME:l.value,LoginFlag:c.value,Adminstrator:i.value,IconImage:m,style:{"padding-bottom":"60px"},onClick:e[0]||(e[0]=o=>d())},null,8,["APP_NAME","LoginFlag","Adminstrator"]),g("div",E,[n.value?(u(),v("p",{key:0,textContent:w("投稿日時 : "+n.value),class:"text-secondary text-end"},null,8,F)):h("",!0),g("div",b,[g("div",{class:"ql-editor",innerHTML:r.value},null,8,j)])]),P(I,{APP_NAME:l.value,LoginFlag:c.value,Adminstrator:i.value,IconImage:m},null,8,["APP_NAME","LoginFlag","Adminstrator"])],64))}};export{q as default};
