import{u as T,r as s,e as E,o as p,c as N,l as C,j as _,a as e,t as I,v as f,x as w,z as V,F as S,_ as j,n as F,p as M,d as A,g as B,s as z,h as R,w as D,i as O,b as U,A as Z}from"./app-BBkFCyAd.js";import{L as P}from"./LoadingComponent-sCqGFqAI.js";const H={class:"text-center text-light"},J=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-envelope-at-fill",viewBox:"0 0 16 16"},[e("path",{d:"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z"}),e("path",{d:"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z"})],-1),q=["textContent"],K=e("hr",null,null,-1),X=e("h2",null,"認証コード",-1),W={class:"form-text text-danger text-start"},G={class:"text-end mt-5"},Q={__name:"RegisterEmailComponent",props:{InputFirstName:String,InputLastName:String,InputNickName:String,InputEmail:String,InputPassword:String,Token:Number},setup(h){const b=T(),m=h,d=s(),c=s(!1),u=s(!1);E(()=>{document.title="メール確認",document.getElementById("InputToken").addEventListener("input",()=>{c.value=!1}),document.addEventListener("keypress",n=>{n.key==="Enter"&&i()})});function i(){u.value=!0,fetch("register/create",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({Token:m.Token,InputToken:d.value,first_name:m.InputFirstName,last_name:m.InputLastName,name:m.InputNickName,email:m.InputEmail,password:m.InputPassword})}).then(n=>n.json()).then(n=>{n.check?b.push({name:"home"}):(d.value="",c.value=!0,u.value=!1)}).catch(n=>{console.log(n),u.value=!1})}return(n,r)=>(p(),N(S,null,[u.value?(p(),C(P,{key:0})):_("",!0),e("div",H,[J,e("h5",{class:"my-5 text-start",textContent:I(h.InputEmail+"にメール送信しました。30分以内にメール記載の6桁の認証コードを入力してください。")},null,8,q),K,X,f(e("input",{type:"number",id:"InputToken",class:"form-control border-success border-3","onUpdate:modelValue":r[0]||(r[0]=o=>d.value=o),placeholder:"認証コードを入力してください"},null,512),[[w,d.value]]),f(e("div",W,"認証コードが不正です",512),[[V,c.value]])]),e("div",G,[e("button",{type:"button",class:"btn btn-primary",onClick:r[1]||(r[1]=o=>i())},"確認する")])],64))}},$=h=>(M("data-v-d1f84a10"),h=h(),A(),h),Y={key:1},ee={class:"mb-3 d-flex"},te={class:"w-100 me-3"},se=$(()=>e("label",{for:"FirstName",class:"form-label m-0"},"姓",-1)),ae={class:"w-100 ms-3"},oe=$(()=>e("label",{for:"LastName",class:"form-label m-0"},"名",-1)),ne={class:"mb-3"},le=$(()=>e("label",{for:"Name",class:"form-label m-0"},"ニックネーム",-1)),de=$(()=>e("div",{class:"form-text text-secondary m-0"},"半角英字、数字、ピリオドを使用できます。",-1)),ie={class:"mb-3"},re=$(()=>e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1)),ce={class:"form-text text-danger text-start"},ue={class:"mb-3"},ve=$(()=>e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1)),me=["textContent"],pe={class:"text-center mt-3 mx-2"},he={class:"row"},fe=$(()=>e("div",{class:"col text-start"},[e("a",{href:"login",class:"text-decoration-none"},"代わりにログイン")],-1)),_e={class:"col text-end"},be=["disabled"],ge={__name:"RegisterComponent",setup(h){const b=s(),m=s(Math.floor(Math.random()*888889)+111111),d=s(),c=s(),u=s(),i=s(),n=s(),r=s(!1),o=s(!0),g=s(!0),x=s(!1),y=s(!1);E(()=>{document.title="新規登録",k(),document.addEventListener("keypress",a=>{a.key==="Enter"&&!o.value&&t()})}),F(()=>{d.value&&c.value&&u.value&&i.value&&n.value?i.value.includes("@")&&(o.value=!1):o.value=!0});function k(){let a=document.getElementById("Password");r.value?(a.type="text",b.value="パスワードを非表示",r.value=!1):(a.type="password",b.value="パスワードを表示",r.value=!0)}function t(){x.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({subject:"テストメール",email:i.value,onetime_token:m.value})}).then(a=>a.json()).then(a=>{x.value=!1,a.emailCheck?g.value=!1:y.value=!0}).catch(a=>{console.log(a),x.value=!1})}return(a,l)=>(p(),N(S,null,[x.value?(p(),C(P,{key:0})):_("",!0),g.value?(p(),N("form",Y,[e("div",ee,[e("div",te,[se,f(e("input",{type:"text",id:"FirstName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":l[0]||(l[0]=v=>d.value=v)},null,512),[[w,d.value]])]),e("div",ae,[oe,f(e("input",{type:"text",id:"LastName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":l[1]||(l[1]=v=>c.value=v)},null,512),[[w,c.value]])])]),e("div",ne,[le,f(e("input",{type:"text",id:"Name",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":l[2]||(l[2]=v=>u.value=v)},null,512),[[w,u.value]]),de]),e("div",ie,[re,f(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":l[3]||(l[3]=v=>i.value=v)},null,512),[[w,i.value]]),f(e("div",ce,"既に存在しているメールアドレスです",512),[[V,y.value]])]),e("div",ue,[ve,f(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":l[4]||(l[4]=v=>n.value=v)},null,512),[[w,n.value]]),e("button",{type:"button",id:"clickItem",class:"form-text text-secondary btn p-1 border-0",onClick:l[5]||(l[5]=v=>k()),textContent:I(b.value)},null,8,me)]),e("div",pe,[e("div",he,[fe,e("div",_e,[e("button",{type:"button",class:"btn btn-primary px-5",onClick:l[6]||(l[6]=v=>t()),disabled:o.value},"次へ",8,be)])])])])):_("",!0),g.value?_("",!0):(p(),C(Q,{key:2,InputFirstName:d.value,InputLastName:c.value,InputNickName:u.value,InputEmail:i.value,InputPassword:n.value,Token:m.value},null,8,["InputFirstName","InputLastName","InputNickName","InputEmail","InputPassword","Token"]))],64))}},xe=j(ge,[["__scopeId","data-v-d1f84a10"]]),L=h=>(M("data-v-32721dbf"),h=h(),A(),h),ye={class:"form-floating text-dark mb-3"},we=L(()=>e("label",{for:"Email"},"メールアドレス",-1)),ke={class:"form-floating text-dark mb-3"},Ce=L(()=>e("label",{for:"Password"},"パスワード",-1)),Ie={class:"form-text text-danger text-start"},Ne=["textContent"],$e={class:"mt-3"},Le={class:"text-center"},Ee=["disabled"],Se=L(()=>e("div",{class:"d-flex align-items-center justify-content-center mt-1"},[e("a",{href:"/tps-site/auth/register",class:"btn text-secondary text-truncate border-0 p-0"},"新規登録")],-1)),Pe={class:"card card-body text-bg-dark border"},Te=["textContent"],Ve=U('<div class="text-secondary" data-v-32721dbf>この決定への異議申し立てはお問い合わせから可能です。</div><hr data-v-32721dbf><div class="fw-bold mb-3" data-v-32721dbf>この影響について</div><div class="d-flex align-items-center justify-content-start mb-3" data-v-32721dbf><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16" data-v-32721dbf><path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z" data-v-32721dbf></path><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z" data-v-32721dbf></path></svg><div class="ms-3" data-v-32721dbf>あなたのアカウントは利用規約に違反しています。</div></div><div class="d-flex align-items-center justify-content-start mb-3" data-v-32721dbf><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-slash-circle" viewBox="0 0 16 16" data-v-32721dbf><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" data-v-32721dbf></path><path d="M11.354 4.646a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 .708.708l6-6a.5.5 0 0 0 0-.708z" data-v-32721dbf></path></svg><div class="ms-3" data-v-32721dbf>あなたのアカウントを認証できない場合、アカウントは永久に停止されます。</div></div>',5),je={class:"d-flex align-items-center justify-content-start mb-3"},Fe=L(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-calendar-event",viewBox:"0 0 16 16"},[e("path",{d:"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"}),e("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"})],-1)),Me={class:"ms-3"},Ae=L(()=>e("hr",null,null,-1)),Be={__name:"LoginComponent",setup(h){const b=T(),m=s(),d=s(),c=s(),u=s(!1),i=s(!1),n=s(!1),r=s(!0),o=s(null),g=s(!1);E(()=>{document.title="ログイン",window.addEventListener("resize",x),x(),y(),document.addEventListener("keypress",t=>{t.key==="Enter"&&!r.value&&k()})}),F(()=>{d.value&&c.value?d.value.includes("@")&&(r.value=!1):r.value=!0});const x=()=>{window.screen.width<=768?g.value=!0:g.value=!1};function y(){let t=document.getElementById("Password");u.value?(t.type="text",m.value="パスワードを非表示",u.value=!1):(t.type="password",m.value="パスワードを表示",u.value=!0)}function k(){i.value=!0,fetch("/tps-site/auth/login",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({email:d.value,password:c.value})}).then(t=>t.json()).then(t=>{if(document.querySelector('meta[name="csrf-token"]').content=t.csrf,t.check&&t.responseData)b.push({name:"home"});else if(t.check&&!t.responseData){o.value=new Array,o.value=t.user_ban_list;const a=new Date(o.value.start_date),l=new Date(o.value.last_date);o.value.start_date=a.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),o.value.last_date=l.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}else n.value=!0;i.value=!1}).catch(t=>{console.log(t),i.value=!1,n.value=!0})}return(t,a)=>{const l=B("router-link");return p(),N(S,null,[i.value?(p(),C(P,{key:0})):_("",!0),e("div",ye,[f(e("input",{type:"email",class:"form-control border-0",id:"Email",placeholder:"name@example.com","onUpdate:modelValue":a[0]||(a[0]=v=>d.value=v)},null,512),[[w,d.value]]),we]),e("div",ke,[f(e("input",{type:"password",class:"form-control border-0",id:"Password",placeholder:"Password","onUpdate:modelValue":a[1]||(a[1]=v=>c.value=v)},null,512),[[w,c.value]]),Ce,f(e("div",Ie,"メールアドレスまたはパスワードが不明です",512),[[V,n.value]]),e("button",{type:"button",id:"clickItem",class:"form-text text-secondary btn p-1 border-0",onClick:a[2]||(a[2]=v=>y()),textContent:I(m.value)},null,8,Ne)]),e("div",$e,[e("div",Le,[e("button",{type:"button",class:"btn btn-primary rounded-pill w-100",onClick:a[3]||(a[3]=v=>k()),disabled:r.value},"ログイン",8,Ee),Se])]),o.value?(p(),N("div",{key:1,class:z(["ElmCenter px-3",{"w-100":g.value}])},[e("div",Pe,[e("div",{class:"fs-5 fw-bold",textContent:I("あなたのアカウントは"+o.value.start_date+"に利用停止されました")},null,8,Te),Ve,e("div",je,[Fe,e("div",Me,"あなたのアカウントは、"+I(o.value.last_date)+"まで停止されます。",1)]),Ae,R(l,{to:{name:"contact"},class:"btn btn-primary rounded-pill py-1"},{default:D(()=>[O("問い合わせ")]),_:1})])],2)):_("",!0)],64)}}},ze=j(Be,[["__scopeId","data-v-32721dbf"]]),Re={key:1,class:"bg-dark d-flex align-items-center justify-content-center",style:{width:"100%",height:"100vh"}},De={class:"card-header border-0"},Oe={class:"d-flex align-items-center justify-content-center"},Ue={class:"text-center"},Ze=["textContent"],He={class:"card-body overflow-auto"},Je={__name:"Auth",setup(h){const b=T(),m=s(!1),d=s(""),c=s(),u=s(),i=s(),n=s(!0),r=s([]),o=s();E(()=>{g(),x(),k(),y(),window.addEventListener("resize",y)});const g=()=>{fetch("/tps-site/auth/login/check").then(t=>t.json()).then(t=>{t.ResponseData?b.push({name:"home"}):(n.value=!1,m.value=!0)}).catch(t=>{console.log(t)})},x=()=>{fetch("/tps-site/get/env").then(t=>t.json()).then(t=>{d.value=t.ResponseData}).catch(t=>{console.log(t)})},y=()=>{window.screen.width<=768?(c.value="100%",u.value="100vh",i.value=!1):(c.value="35%",u.value="60%",i.value=!0)},k=()=>{location.pathname==="/tps-site/auth/register"?(r.value[0]=!0,o.value="アカウントの作成"):location.pathname==="/tps-site/auth/login"&&(r.value[1]=!0,o.value="ログイン")};return(t,a)=>{const l=B("router-link");return p(),N(S,null,[n.value?(p(),C(P,{key:0})):_("",!0),m.value?(p(),N("div",Re,[e("div",{class:z(["card text-bg-dark colorBackGradient",{"border-light":i.value}]),style:Z({width:c.value,height:u.value})},[e("div",De,[e("div",Oe,[e("div",Ue,[R(l,{to:"/",class:"fw-bold fs-1 text-light text-decoration-none"},{default:D(()=>[O(I(d.value),1)]),_:1}),e("h4",{textContent:I(d.value+o.value)},null,8,Ze)])])]),e("div",He,[r.value[0]?(p(),C(xe,{key:0})):_("",!0),r.value[1]?(p(),C(ze,{key:1})):_("",!0)])],6)])):_("",!0)],64)}}},Xe=j(Je,[["__scopeId","data-v-c05cd659"]]);export{Xe as default};
