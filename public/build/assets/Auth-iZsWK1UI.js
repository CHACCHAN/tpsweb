import{_ as F,b as f,c as C,i as V,u as E,r as t,o as $,g as w,h as y,d as e,t as I,m as g,v as x,p as L,F as S,q as P,a as j,e as A,w as B,l as O,n as R,f as M}from"./app-_nruj3NO.js";const U={},Z={class:"position-fixed d-flex align-items-center justify-content-center z-3",style:{top:"0",left:"0",width:"100%",height:"100vh"}},q=V('<div class="bg-light opacity-25" style="width:100%;height:100vh;"></div><div class="position-absolute"><div class="Loader" data-text="LOADING"><span class="Loader__Circle"></span><span class="Loader__Circle"></span><span class="Loader__Circle"></span><span class="Loader__Circle"></span></div></div>',2),z=[q];function D(N,v){return f(),C("div",Z,z)}const T=F(U,[["render",D]]),J={class:"text-center text-light"},K=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-envelope-at-fill",viewBox:"0 0 16 16"},[e("path",{d:"M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z"}),e("path",{d:"M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z"})],-1),X=["textContent"],H=e("hr",null,null,-1),G=e("h2",null,"認証コード",-1),W={class:"form-text text-danger text-start"},Q={class:"text-end mt-5"},Y={__name:"RegisterEmailComponent",props:{InputFirstName:String,InputLastName:String,InputNickName:String,InputEmail:String,InputPassword:String,Token:Number},setup(N){const v=E(),n=N,a=t(n.InputFirstName),i=t(n.InputLastName),r=t(n.InputNickName),o=t(n.InputEmail),p=t(n.InputPassword),_=t(n.Token),m=t(),l=t(!1),s=t(!1);$(()=>{document.getElementById("InputToken").addEventListener("input",()=>{l.value=!1})});function u(){s.value=!0,fetch("register/create",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({Token:_.value,InputToken:m.value,first_name:a.value,last_name:i.value,name:r.value,email:o.value,password:p.value})}).then(c=>c.json()).then(c=>{c.check?v.push({name:"home"}):(m.value="",l.value=!0,s.value=!1)}).catch(c=>{console.log(c),s.value=!1})}return(c,k)=>(f(),C(S,null,[s.value?(f(),w(T,{key:0})):y("",!0),e("div",J,[K,e("h5",{class:"my-5 text-start",textContent:I(o.value+"にメール送信しました。30分以内にメール記載の6桁の認証コードを入力してください。")},null,8,X),H,G,g(e("input",{type:"number",id:"InputToken",class:"form-control border-success border-3","onUpdate:modelValue":k[0]||(k[0]=h=>m.value=h),placeholder:"認証コードを入力してください"},null,512),[[x,m.value]]),g(e("div",W,"認証コードが間違っています",512),[[L,l.value]])]),e("div",Q,[e("button",{type:"button",class:"btn btn-primary",onClick:k[1]||(k[1]=h=>u())},"確認する")])],64))}},ee={key:1},te={class:"mb-3 d-flex"},se={class:"w-100 me-3"},oe=e("label",{for:"FirstName",class:"form-label m-0"},"姓",-1),ne={class:"w-100 ms-3"},ae=e("label",{for:"LastName",class:"form-label m-0"},"名",-1),le={class:"mb-3"},ie=e("label",{for:"Name",class:"form-label m-0"},"ニックネーム",-1),re=e("div",{class:"form-text text-secondary m-0"},"半角英字、数字、ピリオドを使用できます。",-1),ue={class:"mb-3"},ce=e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1),de={class:"form-text text-danger text-start"},me={class:"mb-3"},ve=e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1),pe=["textContent"],_e={class:"text-center mt-3 mx-2"},he={class:"row"},fe=e("div",{class:"col text-start"},[e("a",{href:"login",class:"text-decoration-none"},"代わりにログイン")],-1),be={class:"col text-end"},ge=["disabled"],xe={__name:"RegisterComponent",setup(N){const v=t(),n=t(Math.floor(Math.random()*888889)+111111),a=t(),i=t(),r=t(),o=t(),p=t(),_=t(!1),m=t(!0),l=t(!0),s=t(!1),u=t(!1);$(()=>{c()}),P(()=>{a.value&&i.value&&r.value&&o.value&&p.value?o.value.includes("@")&&(m.value=!1):m.value=!0});function c(){let h=document.getElementById("Password");_.value?(h.type="text",v.value="パスワードを非表示",_.value=!1):(h.type="password",v.value="パスワードを表示",_.value=!0)}function k(){s.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({subject:"テストメール",email:o.value,onetime_token:n.value})}).then(h=>h.json()).then(h=>{s.value=!1,h.emailCheck?l.value=!1:u.value=!0}).catch(h=>{console.log(h),s.value=!1})}return(h,d)=>(f(),C(S,null,[s.value?(f(),w(T,{key:0})):y("",!0),l.value?(f(),C("form",ee,[e("div",te,[e("div",se,[oe,g(e("input",{type:"text",id:"FirstName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":d[0]||(d[0]=b=>a.value=b)},null,512),[[x,a.value]])]),e("div",ne,[ae,g(e("input",{type:"text",id:"LastName",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":d[1]||(d[1]=b=>i.value=b)},null,512),[[x,i.value]])])]),e("div",le,[ie,g(e("input",{type:"text",id:"Name",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":d[2]||(d[2]=b=>r.value=b)},null,512),[[x,r.value]]),re]),e("div",ue,[ce,g(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":d[3]||(d[3]=b=>o.value=b)},null,512),[[x,o.value]]),g(e("div",de,"既に存在しているメールアドレスです",512),[[L,u.value]])]),e("div",me,[ve,g(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":d[4]||(d[4]=b=>p.value=b)},null,512),[[x,p.value]]),e("button",{type:"button",class:"form-text text-secondary btn btn-dark p-1 border-0",onClick:d[5]||(d[5]=b=>c()),textContent:I(v.value)},null,8,pe)]),e("div",_e,[e("div",he,[fe,e("div",be,[e("button",{type:"button",class:"btn btn-primary px-5",onClick:d[6]||(d[6]=b=>k()),disabled:m.value},"次へ",8,ge)])])])])):y("",!0),l.value?y("",!0):(f(),w(Y,{key:2,InputFirstName:a.value,InputLastName:i.value,InputNickName:r.value,InputEmail:o.value,InputPassword:p.value,Token:n.value},null,8,["InputFirstName","InputLastName","InputNickName","InputEmail","InputPassword","Token"]))],64))}},ye={class:"mb-3"},ke=e("label",{for:"Email",class:"form-label m-0"},"メールアドレス",-1),Ce={class:"mb-3"},we=e("label",{for:"Password",class:"form-label m-0"},"パスワード",-1),Ne={class:"form-text text-danger text-start"},Ie=["textContent"],$e={class:"mt-3"},Le={class:"text-center"},Se=["disabled"],Te=e("button",{type:"button",class:"btn text-primary border-0 p-0"},"メールアドレスまたはパスワードを忘れた方",-1),Ee={__name:"LoginComponent",setup(N){const v=E(),n=t(),a=t(),i=t(),r=t(!1),o=t(!1),p=t(!1),_=t(!0);$(()=>{m()}),P(()=>{a.value&&i.value?a.value.includes("@")&&(_.value=!1):_.value=!0});function m(){let s=document.getElementById("Password");r.value?(s.type="text",n.value="パスワードを非表示",r.value=!1):(s.type="password",n.value="パスワードを表示",r.value=!0)}function l(){o.value=!0,fetch("",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:i.value})}).then(s=>s.json()).then(s=>{document.querySelector('meta[name="csrf-token"]').content=s.csrf,s.check?v.push({name:"home"}):p.value=!0,o.value=!1}).catch(s=>{console.log(s),o.value=!1,p.value=!0})}return(s,u)=>(f(),C(S,null,[o.value?(f(),w(T,{key:0})):y("",!0),e("div",ye,[ke,g(e("input",{type:"email",id:"Email",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},null,512),[[x,a.value]])]),e("div",Ce,[we,g(e("input",{type:"password",id:"Password",class:"form-control text-bg-dark border-secondary","onUpdate:modelValue":u[1]||(u[1]=c=>i.value=c)},null,512),[[x,i.value]]),g(e("div",Ne,"メールアドレスまたはパスワードが不明です",512),[[L,p.value]]),e("button",{type:"button",class:"form-text text-secondary btn btn-dark p-1 border-0",onClick:u[2]||(u[2]=c=>m()),textContent:I(n.value)},null,8,Ie)]),e("div",$e,[e("div",Le,[e("button",{type:"button",class:"btn btn-primary rounded-pill w-100",onClick:u[3]||(u[3]=c=>l()),disabled:_.value},"ログイン",8,Se),Te])])],64))}},Pe={class:"bg-dark d-flex align-items-center justify-content-center",style:{width:"100%",height:"100vh"}},Fe={class:"card-header border-0"},Ve={class:"d-flex align-items-center justify-content-center"},je={class:"text-center"},Ae=["textContent"],Be={class:"card-body overflow-auto"},Re={__name:"Auth",setup(N){const v=t(),n=t(),a=t(),i=t(),r=t([]),o=t();$(()=>{p(),_(),m(),window.addEventListener("resize",_)});const p=()=>{fetch("/tps-site/get/env").then(l=>l.json()).then(l=>{v.value=l.ResponseData}).catch(l=>{console.log(l)})},_=()=>{window.screen.width<=768?(n.value="100%",a.value="100vh",i.value=!1):(n.value="35%",a.value="60%",i.value=!0)},m=()=>{location.pathname==="/tps-site/auth/register"?(r.value[0]=!0,o.value="アカウントの作成"):location.pathname==="/tps-site/auth/login"&&(r.value[1]=!0,o.value="ログイン")};return(l,s)=>{const u=j("router-link");return f(),C("div",Pe,[e("div",{class:O(["card text-bg-dark",{"border-light":i.value}]),style:R({width:n.value,height:a.value})},[e("div",Fe,[e("div",Ve,[e("div",je,[A(u,{to:"/",class:"fw-bold fs-1 text-light text-decoration-none"},{default:B(()=>[M(I(v.value),1)]),_:1}),e("h4",{textContent:I(v.value+o.value)},null,8,Ae)])])]),e("div",Be,[r.value[0]?(f(),w(xe,{key:0})):y("",!0),r.value[1]?(f(),w(Ee,{key:1})):y("",!0)])],6)])}}};export{Re as default};
